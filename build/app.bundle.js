!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var o,r=n(1),i=(o=r)&&o.__esModule?o:{default:o};console.log((0,i.default)([[],[3],[4],[],[5,6,2,6],[],[]],4))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.default=function(t,e){if(e>0){for(var n=s.fromRawData(t),o=new a(e,n),r=0;r<n.floors.length;r++){var i=n.floors[r];if(i.persons.length>0)for(var l=0;l<i.persons.length;l++){var c=i.persons[l];o.call(new u(r,c.getDirection(r)))}}return o.move(),o.stoppedAt}throw new Error("Capacity have to be positive number")};var i=function(){function t(e){r(this,t),this.persons=e}return o(t,[{key:"removePerson",value:function(t){this.persons.splice(t,1)}}],[{key:"fromRawData",value:function(e){for(var n=[],o=0;o<e.length;o++){var r=e[o],i=l.fromRawData(r);n.push(i)}return new t(n)}}]),t}(),l=function(){function t(e){r(this,t),this.destinationFloor=e}return o(t,[{key:"getDirection",value:function(t){return t<this.destinationFloor?"up":"down"}}],[{key:"fromRawData",value:function(e){return new t(e)}}]),t}(),s=function(){function t(e){r(this,t),this.floors=e}return o(t,null,[{key:"fromRawData",value:function(e){for(var n=[],o=0;o<e.length;o++){var r=e[o],l=i.fromRawData(r);n.push(l)}return new t(n)}}]),t}(),u=function t(e,n){r(this,t),this.floor=e,this.direction=n},a=function(){function t(e,n){r(this,t),this.direction="not-moving",this.currentFloorIndex=0,this.stoppedAt=[this.currentFloorIndex],this.persons=[],this.capacity=e,this.calls=[],this.building=n}return o(t,[{key:"move",value:function(){for(var t=this;this.calls.length>0;)this.decideOnDirection(),this.moveByOneFloor(),this.calls.filter(function(e){return t.shouldElevatorStop(e,t.currentFloorIndex,t.direction)}).length>0&&(this.stoppedAt.push(this.currentFloorIndex),this.calls=this.calls.filter(function(e){return!t.shouldElevatorStop(e,t.currentFloorIndex,t.direction)}),this.peopleExitElevator(),this.peopleEnterElevator()),this.goToBasementIfNoCalls()}},{key:"decideOnDirection",value:function(){var t=this,e=this.calls.filter(function(e){return e.floor>t.currentFloorIndex}).length,n=this.calls.filter(function(e){return e.floor<t.currentFloorIndex}).length;"not-moving"===this.direction?this.direction=e>=n?"up":"down":"up"===this.direction&&0===e?this.direction="down":"down"===this.direction&&0===n&&(this.direction="up")}},{key:"moveByOneFloor",value:function(){"up"===this.direction?this.currentFloorIndex++:"down"===this.direction&&this.currentFloorIndex--}},{key:"shouldElevatorStop",value:function(t,e,n){return t.floor===e&&(t.direction===n||"not-important"===t.direction)}},{key:"peopleExitElevator",value:function(){var t=this,e=this.persons.filter(function(e){return e.destinationFloor!==t.currentFloorIndex});this.persons=e}},{key:"peopleEnterElevator",value:function(){for(var t=this.building.floors[this.currentFloorIndex],e=0;this.persons.length<this.capacity&&t.persons.length>e;){var n=t.persons[e];n.getDirection(this.currentFloorIndex)===this.direction?(this.persons.push(t.persons[e]),this.call(new u(n.destinationFloor,"not-important")),t.removePerson(e)):e++}if(t.persons.length>0)for(var o=0;o<t.persons.length;o++){var r=t.persons[o];this.call(new u(this.currentFloorIndex,r.getDirection(this.currentFloorIndex)))}}},{key:"goToBasementIfNoCalls",value:function(){0==this.calls.length&&0!=this.currentFloorIndex&&this.call(new u(0,"down"))}},{key:"call",value:function(t){for(var e=!1,n=0;n<this.calls.length;n++)t.floor==this.calls[n].floor&&t.direction==this.calls[n].direction&&(e=!0),t.floor==this.calls[n].floor&&"not-important"===t.direction&&(this.calls[n]=t,e=!0);e||this.calls.push(t)}}]),t}()}]);
//# sourceMappingURL=app.bundle.js.map